{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/mihajlot/movie-app-test/pages/auth/auth-success.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Layout from '../../components/Layout/Layout';\nimport EmptyItem from '../../components/EmptyItem/EmptyItem';\nimport Button from '../../components/Shared/Button/Button';\nimport { createAccessToken, createSessionId } from '../../services/auth-service';\n\nfunction AuthSuccess() {\n  _s();\n\n  var _useState = useState(\"\"),\n      authStatus = _useState[0],\n      setAuthStatus = _useState[1];\n\n  useEffect(function () {\n    var request_token = localStorage.getItem('request_token');\n\n    if (!request_token) {\n      setAuthStatus(\"Nothing to be seen here. Go ahead and add some favorite movies\");\n    } else {\n      getTokens(request_token);\n    }\n  });\n\n  function getTokens(_x) {\n    return _getTokens.apply(this, arguments);\n  }\n\n  function _getTokens() {\n    _getTokens = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(request_token) {\n      var accessToken, sessionId;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return createAccessToken(request_token);\n\n            case 2:\n              accessToken = _context.sent;\n              _context.next = 5;\n              return createSessionId(accessToken.access_token);\n\n            case 5:\n              sessionId = _context.sent;\n              localStorage.setItem(\"access_token\", accessToken.access_token);\n              localStorage.setItem(\"account_id\", accessToken.account_id);\n              localStorage.setItem(\"session_id\", sessionId.session_id);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getTokens.apply(this, arguments);\n  }\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 17\n    }\n  }, \"Authorization\")), __jsx(\"div\", {\n    style: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  }, authStatus.length > 0 ? __jsx(EmptyItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 21\n    }\n  }, authStatus) : __jsx(EmptyItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 21\n    }\n  }, \"You are successfully authorized.\", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 64\n    }\n  }), \"You can add movies to favorites now.\", __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 29\n    }\n  }, __jsx(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 33\n    }\n  }, \"Browse movies\"))))));\n}\n\n_s(AuthSuccess, \"SllmgsiLhYQkpAv1KxTTDRWCE20=\");\n\n_c = AuthSuccess;\nexport default AuthSuccess;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthSuccess\");","map":{"version":3,"sources":["/home/mihajlot/movie-app-test/pages/auth/auth-success.jsx"],"names":["React","useEffect","useState","Head","Link","Layout","EmptyItem","Button","createAccessToken","createSessionId","AuthSuccess","authStatus","setAuthStatus","request_token","localStorage","getItem","getTokens","accessToken","access_token","sessionId","setItem","account_id","session_id","color","length"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,SAASC,iBAAT,EAA4BC,eAA5B,QAAmD,6BAAnD;;AAEA,SAASC,WAAT,GAAuB;AAAA;;AAAA,kBACiBR,QAAQ,CAAC,EAAD,CADzB;AAAA,MACZS,UADY;AAAA,MACAC,aADA;;AAGnBX,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIY,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAApB;;AACA,QAAI,CAACF,aAAL,EAAoB;AAChBD,MAAAA,aAAa,CAAC,gEAAD,CAAb;AACH,KAFD,MAEO;AACHI,MAAAA,SAAS,CAACH,aAAD,CAAT;AACH;AACJ,GAPQ,CAAT;;AAHmB,WAYJG,SAZI;AAAA;AAAA;;AAAA;AAAA,0EAYnB,iBAAyBH,aAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAC4BL,iBAAiB,CAACK,aAAD,CAD7C;;AAAA;AACQI,cAAAA,WADR;AAAA;AAAA,qBAE0BR,eAAe,CAACQ,WAAW,CAACC,YAAb,CAFzC;;AAAA;AAEQC,cAAAA,SAFR;AAGIL,cAAAA,YAAY,CAACM,OAAb,CAAqB,cAArB,EAAqCH,WAAW,CAACC,YAAjD;AACAJ,cAAAA,YAAY,CAACM,OAAb,CAAqB,YAArB,EAAmCH,WAAW,CAACI,UAA/C;AACAP,cAAAA,YAAY,CAACM,OAAb,CAAqB,YAArB,EAAmCD,SAAS,CAACG,UAA7C;;AALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAZmB;AAAA;AAAA;;AAoBnB,SACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,CADJ,EAII;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKZ,UAAU,CAACa,MAAX,GAAoB,CAApB,GACG,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYb,UAAZ,CADH,GAGG,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAA2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA3C,0CAEJ,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,CADZ,CAFI,CAJR,CAJJ,CADJ;AAsBH;;GA1CQD,W;;KAAAA,W;AA4CT,eAAeA,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Layout from '../../components/Layout/Layout';\nimport EmptyItem from '../../components/EmptyItem/EmptyItem'\nimport Button from '../../components/Shared/Button/Button'\nimport { createAccessToken, createSessionId } from '../../services/auth-service';\n\nfunction AuthSuccess() {\n    const [authStatus, setAuthStatus] = useState(\"\");\n\n    useEffect(() => {\n        let request_token = localStorage.getItem('request_token');\n        if (!request_token) {\n            setAuthStatus(\"Nothing to be seen here. Go ahead and add some favorite movies\")\n        } else {\n            getTokens(request_token);\n        }\n    })\n\n    async function getTokens(request_token) {\n        let accessToken = await createAccessToken(request_token);\n        let sessionId = await createSessionId(accessToken.access_token);\n        localStorage.setItem(\"access_token\", accessToken.access_token);\n        localStorage.setItem(\"account_id\", accessToken.account_id);\n        localStorage.setItem(\"session_id\", sessionId.session_id);\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>Authorization</title>\n            </Head>\n            <div style={{ color: 'white' }}>\n                {authStatus.length > 0 ?\n                    <EmptyItem>{authStatus}</EmptyItem>\n                    :\n                    <EmptyItem>You are successfully authorized.<br />\n                You can add movies to favorites now.\n                <Link href=\"/\">\n                            <div>\n                                <Button>Browse movies</Button>\n                            </div>\n                        </Link>\n                    </EmptyItem>\n                }\n\n            </div>\n        </Layout>\n    )\n}\n\nexport default AuthSuccess"]},"metadata":{},"sourceType":"module"}