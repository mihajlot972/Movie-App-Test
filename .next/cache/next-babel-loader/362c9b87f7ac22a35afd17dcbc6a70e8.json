{"ast":null,"code":"var _jsxFileName = \"/home/mihajlot/movie-app-test/components/AddToFavorites/AddToFavorites.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { createRequestToken } from '../../services/auth-service';\nimport { markFavoriteMovie } from '../../services/movie-service';\nimport styles from './AddToFavorites.module.scss';\nimport { HeartOutlined } from '@ant-design/icons';\nimport ReactTooltip from \"react-tooltip\";\nimport Modal from '../Modal/Modal';\nimport Button from '../Shared/Button/Button';\n\nfunction AddToFavorites({\n  movieId\n}) {\n  const {\n    0: isModal,\n    1: setModal\n  } = useState(false);\n  const {\n    0: requestURL,\n    1: setRequestURL\n  } = useState(\"\");\n  const {\n    0: success,\n    1: setSuccess\n  } = useState(\"\");\n  const {\n    0: deleteSuccess,\n    1: setDeleteSuccess\n  } = useState(false);\n\n  async function addFavorite() {\n    let access_token = localStorage.getItem(\"access_token\");\n    let account_id = localStorage.getItem(\"account_id\");\n    let session_id = localStorage.getItem(\"session_id\");\n\n    if (!access_token) {\n      setModal(true);\n      let requestToken = await createRequestToken();\n      localStorage.setItem('request_token', requestToken.request_token);\n      setRequestURL(`https://www.themoviedb.org/auth/access?request_token=${requestToken.request_token}`);\n    } else {\n      let markFavorite = await markFavoriteMovie(movieId, account_id, session_id);\n\n      if (markFavorite.status_message === \"Success.\") {\n        setSuccess(\"Movie added to your favorites list!\");\n      }\n\n      if (markFavorite.status_message === \"The item/record was updated successfully.\") {\n        setSuccess(\"This movie is in your favorite list\");\n      }\n    }\n  }\n\n  async function removeFavorite() {\n    let account_id = localStorage.getItem(\"account_id\");\n    let session_id = localStorage.getItem(\"session_id\");\n    let markFavorite = await markFavoriteMovie(movieId, account_id, session_id, false);\n\n    if (markFavorite.status_message === \"The item/record was deleted successfully.\") {\n      setSuccess(\"Movie removed from favorites\");\n      setDeleteSuccess(true);\n    }\n  }\n\n  return __jsx(\"div\", {\n    className: styles.addToFavoritesWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, __jsx(Modal, {\n    isVisible: isModal,\n    title: \"We need to authorize you first\",\n    content: __jsx(\"a\", {\n      href: requestURL,\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 26\n      }\n    }, \"Click here to approve account usage\"),\n    footer: __jsx(Button, {\n      onClick: () => setModal(stubFalse),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }\n    }, \"Not now\"),\n    onClose: () => setModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: styles.addToFavorites,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, success.length > 0 ? __jsx(\"div\", {\n    className: styles.heartPressed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 25\n    }\n  }, success), !deleteSuccess ? __jsx(\"p\", {\n    className: styles.removeFavorite,\n    onClick: removeFavorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, \"Remove it?\") : null) : __jsx(HeartOutlined, {\n    onClick: addFavorite,\n    \"data-tip\": \"Love this movie? Add it to favorites!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }), __jsx(ReactTooltip, {\n    effect: \"solid\",\n    uuid: \"mytt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default AddToFavorites;","map":{"version":3,"sources":["/home/mihajlot/movie-app-test/components/AddToFavorites/AddToFavorites.jsx"],"names":["React","useState","createRequestToken","markFavoriteMovie","styles","HeartOutlined","ReactTooltip","Modal","Button","AddToFavorites","movieId","isModal","setModal","requestURL","setRequestURL","success","setSuccess","deleteSuccess","setDeleteSuccess","addFavorite","access_token","localStorage","getItem","account_id","session_id","requestToken","setItem","request_token","markFavorite","status_message","removeFavorite","addToFavoritesWrapper","stubFalse","addToFavorites","length","heartPressed"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { createRequestToken } from '../../services/auth-service';\nimport { markFavoriteMovie } from '../../services/movie-service';\nimport styles from './AddToFavorites.module.scss';\nimport { HeartOutlined } from '@ant-design/icons';\nimport ReactTooltip from \"react-tooltip\";\nimport Modal from '../Modal/Modal';\nimport Button from '../Shared/Button/Button';\n\nfunction AddToFavorites({ movieId }) {\n    const [isModal, setModal] = useState(false);\n    const [requestURL, setRequestURL] = useState(\"\");\n    const [success, setSuccess] = useState(\"\");\n    const [deleteSuccess, setDeleteSuccess] = useState(false);\n\n    async function addFavorite() {\n        let access_token = localStorage.getItem(\"access_token\");\n        let account_id = localStorage.getItem(\"account_id\");\n        let session_id = localStorage.getItem(\"session_id\");\n\n        if (!access_token) {\n            setModal(true)\n            let requestToken = await createRequestToken();\n            localStorage.setItem('request_token', requestToken.request_token);\n            setRequestURL(`https://www.themoviedb.org/auth/access?request_token=${requestToken.request_token}`)\n        } else {\n            let markFavorite = await markFavoriteMovie(movieId, account_id, session_id);\n            if (markFavorite.status_message === \"Success.\") {\n                setSuccess(\"Movie added to your favorites list!\");\n            }\n            if (markFavorite.status_message === \"The item/record was updated successfully.\") {\n                setSuccess(\"This movie is in your favorite list\")\n            }\n        }\n    }\n\n    async function removeFavorite() {\n        let account_id = localStorage.getItem(\"account_id\");\n        let session_id = localStorage.getItem(\"session_id\");\n        let markFavorite = await markFavoriteMovie(movieId, account_id, session_id, false);\n        if (markFavorite.status_message === \"The item/record was deleted successfully.\") {\n            setSuccess(\"Movie removed from favorites\")\n            setDeleteSuccess(true)\n        }\n    }\n\n    return (\n        <div className={styles.addToFavoritesWrapper}>\n            <Modal\n                isVisible={isModal}\n                title=\"We need to authorize you first\"\n                content={<a href={requestURL} target='_blank'>Click here to approve account usage</a>}\n                footer={<Button onClick={() => setModal(stubFalse)}>Not now</Button>}\n                onClose={() => setModal(false)}\n            />\n\n            <div className={styles.addToFavorites}>\n\n                {success.length > 0 ?\n                    <div className={styles.heartPressed}>\n                        <p>{success}</p>\n                        {\n                            !deleteSuccess ?\n                                <p className={styles.removeFavorite} onClick={removeFavorite}>Remove it?</p>\n                                : null\n                        }\n                    </div>\n                    :\n                    <HeartOutlined onClick={addFavorite} data-tip=\"Love this movie? Add it to favorites!\" />\n                }\n                <ReactTooltip effect=\"solid\" uuid=\"mytt\" />\n            </div>\n        </div>\n    )\n}\n\n\nexport default AddToFavorites;"]},"metadata":{},"sourceType":"module"}