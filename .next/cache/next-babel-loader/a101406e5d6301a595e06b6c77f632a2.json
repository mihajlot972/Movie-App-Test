{"ast":null,"code":"var _jsxFileName = \"/home/mihajlot/movie-app-test/pages/auth/auth-success.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Layout from '../../components/Layout/Layout';\nimport EmptyItem from '../../components/EmptyItem/EmptyItem';\nimport Button from '../../components/Shared/Button/Button';\nimport { createAccessToken, createSessionId } from '../../services/auth-service';\n\nfunction AuthSuccess() {\n  const {\n    0: authStatus,\n    1: setAuthStatus\n  } = useState(\"\");\n  useEffect(() => {\n    let request_token = localStorage.getItem('request_token');\n\n    if (!request_token) {\n      setAuthStatus(\"Nothing to be seen here. Go ahead and add some favorite movies\");\n    } else {\n      getTokens(request_token);\n    }\n  });\n\n  async function getTokens(request_token) {\n    let accessToken = await createAccessToken(request_token);\n    let sessionId = await createSessionId(accessToken.access_token);\n    localStorage.setItem(\"access_token\", accessToken.access_token);\n    localStorage.setItem(\"account_id\", accessToken.account_id);\n    localStorage.setItem(\"session_id\", sessionId.session_id);\n  }\n\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 17\n    }\n  }, \"List of Favorite Movies\")), __jsx(\"div\", {\n    style: {\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  }, authStatus.length > 0 ? __jsx(EmptyItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 21\n    }\n  }, authStatus) : __jsx(EmptyItem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 21\n    }\n  }, \"You are successfully authorized.\", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 64\n    }\n  }), \"You can add movies to favorites now.\", __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 29\n    }\n  }, \"Browse movies\")))));\n}\n\nexport default AuthSuccess;","map":{"version":3,"sources":["/home/mihajlot/movie-app-test/pages/auth/auth-success.jsx"],"names":["React","useEffect","useState","Head","Link","Layout","EmptyItem","Button","createAccessToken","createSessionId","AuthSuccess","authStatus","setAuthStatus","request_token","localStorage","getItem","getTokens","accessToken","sessionId","access_token","setItem","account_id","session_id","color","length"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,MAAP,MAAmB,uCAAnB;AACA,SAASC,iBAAT,EAA4BC,eAA5B,QAAmD,6BAAnD;;AAEA,SAASC,WAAT,GAAuB;AACnB,QAAM;AAAA,OAACC,UAAD;AAAA,OAAaC;AAAb,MAA8BV,QAAQ,CAAC,EAAD,CAA5C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIY,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAApB;;AACA,QAAI,CAACF,aAAL,EAAoB;AAChBD,MAAAA,aAAa,CAAC,gEAAD,CAAb;AACH,KAFD,MAEO;AACHI,MAAAA,SAAS,CAACH,aAAD,CAAT;AACH;AACJ,GAPQ,CAAT;;AASA,iBAAeG,SAAf,CAAyBH,aAAzB,EAAwC;AACpC,QAAII,WAAW,GAAG,MAAMT,iBAAiB,CAACK,aAAD,CAAzC;AACA,QAAIK,SAAS,GAAG,MAAMT,eAAe,CAACQ,WAAW,CAACE,YAAb,CAArC;AACAL,IAAAA,YAAY,CAACM,OAAb,CAAqB,cAArB,EAAqCH,WAAW,CAACE,YAAjD;AACAL,IAAAA,YAAY,CAACM,OAAb,CAAqB,YAArB,EAAmCH,WAAW,CAACI,UAA/C;AACAP,IAAAA,YAAY,CAACM,OAAb,CAAqB,YAArB,EAAmCF,SAAS,CAACI,UAA7C;AACH;;AAED,SACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADJ,CADJ,EAII;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKZ,UAAU,CAACa,MAAX,GAAoB,CAApB,GACG,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYb,UAAZ,CADH,GAGG,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAA2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA3C,0CAEJ,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACY,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADZ,CAFI,CAJR,CAJJ,CADJ;AAoBH;;AAED,eAAeD,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Layout from '../../components/Layout/Layout';\nimport EmptyItem from '../../components/EmptyItem/EmptyItem'\nimport Button from '../../components/Shared/Button/Button'\nimport { createAccessToken, createSessionId } from '../../services/auth-service';\n\nfunction AuthSuccess() {\n    const [authStatus, setAuthStatus] = useState(\"\");\n\n    useEffect(() => {\n        let request_token = localStorage.getItem('request_token');\n        if (!request_token) {\n            setAuthStatus(\"Nothing to be seen here. Go ahead and add some favorite movies\")\n        } else {\n            getTokens(request_token);\n        }\n    })\n\n    async function getTokens(request_token) {\n        let accessToken = await createAccessToken(request_token);\n        let sessionId = await createSessionId(accessToken.access_token);\n        localStorage.setItem(\"access_token\", accessToken.access_token);\n        localStorage.setItem(\"account_id\", accessToken.account_id);\n        localStorage.setItem(\"session_id\", sessionId.session_id);\n    }\n\n    return (\n        <Layout>\n            <Head>\n                <title>List of Favorite Movies</title>\n            </Head>\n            <div style={{ color: 'white' }}>\n                {authStatus.length > 0 ?\n                    <EmptyItem>{authStatus}</EmptyItem>\n                    :\n                    <EmptyItem>You are successfully authorized.<br />\n                You can add movies to favorites now.\n                <Link href=\"/\">\n                            <Button>Browse movies</Button>\n                        </Link>\n                    </EmptyItem>\n                }\n\n            </div>\n        </Layout>\n    )\n}\n\nexport default AuthSuccess"]},"metadata":{},"sourceType":"module"}