{"ast":null,"code":"var _jsxFileName = \"/home/mihajlot/movie-app-test/components/AddToFavorites/AddToFavorites.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { createRequestToken, createAccessToken } from '../../services/auth-service';\nimport { markFavoriteMovie } from '../../services/movie-service';\nimport styles from './AddToFavorites.module.scss';\nimport { HeartOutlined } from '@ant-design/icons';\nimport ReactTooltip from \"react-tooltip\";\nimport Modal from '../Modal/Modal';\nimport Button from '../Shared/Button/Button';\nimport { stubFalse, remove } from 'lodash';\n\nfunction AddToFavorites({\n  movieId\n}) {\n  const {\n    0: isModal,\n    1: setModal\n  } = useState(false);\n  const {\n    0: requestURL,\n    1: setRequestURL\n  } = useState(\"\");\n  const {\n    0: success,\n    1: setSuccess\n  } = useState(\"\");\n  const {\n    0: deleteSuccess,\n    1: setDeleteSuccess\n  } = useState(false);\n\n  async function addFavorite() {\n    let access_token = localStorage.getItem(\"access_token\");\n    let account_id = localStorage.getItem(\"account_id\");\n    let session_id = localStorage.getItem(\"session_id\");\n\n    if (!access_token) {\n      setModal(true);\n      let requestToken = await createRequestToken();\n      localStorage.setItem('request_token', requestToken.request_token);\n      setRequestURL(`https://www.themoviedb.org/auth/access?request_token=${requestToken.request_token}`);\n    } else {\n      let markFavorite = await markFavoriteMovie(movieId, account_id, session_id);\n\n      if (markFavorite.status_message === \"Success.\") {\n        setSuccess(\"Movie added to your favorites list!\");\n      }\n\n      if (markFavorite.status_message === \"The item/record was updated successfully.\") {\n        setSuccess(\"This movie is in your favorite list\");\n      }\n    }\n  }\n\n  async function removeFavorite() {\n    let account_id = localStorage.getItem(\"account_id\");\n    let session_id = localStorage.getItem(\"session_id\");\n    let markFavorite = await markFavoriteMovie(movieId, account_id, session_id, false);\n\n    if (markFavorite.status_message === \"The item/record was deleted successfully.\") {\n      setSuccess(\"Movie removed from favorites\");\n      setDeleteSuccess(true);\n    }\n  }\n\n  return __jsx(\"div\", {\n    className: styles.addToFavoritesWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, __jsx(Modal, {\n    isVisible: isModal,\n    title: \"We need to authorize you first\",\n    content: __jsx(\"a\", {\n      href: requestURL,\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 26\n      }\n    }, \"Click here to approve account usage\"),\n    footer: __jsx(Button, {\n      onClick: () => setModal(stubFalse),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 25\n      }\n    }, \"Not now\"),\n    onClose: () => setModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }), __jsx(ReactTooltip, {\n    html: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: styles.addToFavorites,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, success.length > 0 ? __jsx(\"div\", {\n    className: styles.heartPressed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 39\n    }\n  }, success, !deleteSuccess ? __jsx(\"p\", {\n    className: styles.removeFavorite,\n    onClick: removeFavorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 39\n    }\n  }, \"Remove it?\") : null) : __jsx(HeartOutlined, {\n    onClick: addFavorite,\n    \"data-tip\": \"Love this movie? Add it to favorites!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 26\n    }\n  })));\n}\n\nexport default AddToFavorites;","map":{"version":3,"sources":["/home/mihajlot/movie-app-test/components/AddToFavorites/AddToFavorites.jsx"],"names":["React","useState","createRequestToken","createAccessToken","markFavoriteMovie","styles","HeartOutlined","ReactTooltip","Modal","Button","stubFalse","remove","AddToFavorites","movieId","isModal","setModal","requestURL","setRequestURL","success","setSuccess","deleteSuccess","setDeleteSuccess","addFavorite","access_token","localStorage","getItem","account_id","session_id","requestToken","setItem","request_token","markFavorite","status_message","removeFavorite","addToFavoritesWrapper","addToFavorites","length","heartPressed"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { createRequestToken, createAccessToken } from '../../services/auth-service';\nimport { markFavoriteMovie } from '../../services/movie-service';\nimport styles from './AddToFavorites.module.scss';\nimport { HeartOutlined } from '@ant-design/icons';\nimport ReactTooltip from \"react-tooltip\";\nimport Modal from '../Modal/Modal';\nimport Button from '../Shared/Button/Button';\nimport { stubFalse, remove } from 'lodash';\n\nfunction AddToFavorites({ movieId }) {\n    const [isModal, setModal] = useState(false);\n    const [requestURL, setRequestURL] = useState(\"\");\n    const [success, setSuccess] = useState(\"\");\n    const [deleteSuccess, setDeleteSuccess] = useState(false);\n\n    async function addFavorite() {\n        let access_token = localStorage.getItem(\"access_token\");\n        let account_id = localStorage.getItem(\"account_id\");\n        let session_id = localStorage.getItem(\"session_id\");\n\n        if (!access_token) {\n            setModal(true)\n            let requestToken = await createRequestToken();\n            localStorage.setItem('request_token', requestToken.request_token);\n            setRequestURL(`https://www.themoviedb.org/auth/access?request_token=${requestToken.request_token}`)\n        } else {\n            let markFavorite = await markFavoriteMovie(movieId, account_id, session_id);\n            if (markFavorite.status_message === \"Success.\") {\n                setSuccess(\"Movie added to your favorites list!\");\n            }\n            if (markFavorite.status_message === \"The item/record was updated successfully.\") {\n                setSuccess(\"This movie is in your favorite list\")\n            }\n        }\n    }\n\n    async function removeFavorite() {\n        let account_id = localStorage.getItem(\"account_id\");\n        let session_id = localStorage.getItem(\"session_id\");\n        let markFavorite = await markFavoriteMovie(movieId, account_id, session_id, false);\n        if(markFavorite.status_message === \"The item/record was deleted successfully.\") {\n            setSuccess(\"Movie removed from favorites\")\n            setDeleteSuccess(true)\n        }\n    }\n\n    return (\n        <div className={styles.addToFavoritesWrapper}>\n            <Modal\n                isVisible={isModal}\n                title=\"We need to authorize you first\"\n                content={<a href={requestURL} target='_blank'>Click here to approve account usage</a>}\n                footer={<Button onClick={() => setModal(stubFalse)}>Not now</Button>}\n                onClose={() => setModal(false)}\n            />\n            <ReactTooltip html={true}/>\n            <div className={styles.addToFavorites}>\n                {success.length > 0 ? <div className={styles.heartPressed}>\n                    {success}\n                    {!deleteSuccess ? <p className={styles.removeFavorite} onClick={removeFavorite}>Remove it?</p> : null}\n                </div> : <HeartOutlined onClick={addFavorite} data-tip=\"Love this movie? Add it to favorites!\" />\n                }\n            </div>\n        </div>\n    )\n}\n\n\nexport default AddToFavorites;"]},"metadata":{},"sourceType":"module"}